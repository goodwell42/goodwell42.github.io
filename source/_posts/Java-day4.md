---
title: Java_day4
date: 2019-09-03 22:12:16
tags: Java
toc: true
categories: 
- Java
- 异常处理
---

自用Java笔记（Ⅳ），主要记录Java异常处理！奋斗ing<!-- more -->

### 异常概述与异常体系结构

开发过程中的语法错误和逻辑错误不是异常。

执行过程中出现的异常分为两类：

- Error：Java虚拟机无法解决的严重问题。eg：StackOverflowError栈溢出和OutOfMemoryError堆溢出。一般不编写针对性的代码进行处理。
- Exception：其他因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码进行处理。又分为编译时异常（受检checked异常） VS 运行时异常（非受检unchecked异常）

### 异常处理机制

关于异常对象的产生：

- 系统自动生成的异常对象
- 手动的生成一个异常对象，并抛出（throw）

#### 抓抛模型：

1. “抛”：程序在正常执行中，一旦出现异常就会在代码处生成一个对应异常类的对象，并抛出。之后的代码不再执行。
2. ‘’抓“：可以理解为异常的处理方式，如下两种方式：

#### try-catch-finally

```java
try{
    //可能会出现异常的代码
} catch(异常类型1 变量名1) {
    //处理异常的方法1
} catch(异常类型2 变量名2) {
    //处理异常的方法2
}
...
finally{
    //一定会执行的代码
}
```

PS：

- catch中的异常类型若五子类父类关系 ，无需考虑声明的先后顺序；若有，子类必须声明在父类的上面，否则报错。
- 在try中声明的变量，在大括号外不能调用。try-catch-finally可以嵌套。
- finally是可选的，其中声明的是一定会执行的代码，即便catch中又出现了异常，try或catch中有return语句等情况。
- **finally**重要应用：像数据库连接、输入输出流、网络编程Socket等资源，JVM是不能自动的回收的，需要收到编写代码进行资源的释放，此时代码就需要编写在finally中。

常用异常对象处理的方式：①String getMessage() ②printStackTrace()

体会：

1. 使用try-catch-finally处理编译时异常，是使得程序在编译时不再报错，但在运行时仍可能报错。“延迟”、
2. 开发中，由于运行时异常比较常见，所以我们通常不针对运行时异常编写try-catch-finally，针对编译时异常，一定要考虑异常的处理。

#### throws + 异常类型

声明在方法的声明处，指明此方法执行时，可能回抛出的异常类型，一旦方法体执行时出现异常，仍会在异常处生成一个异常类的对象。此对象满足throws后的异常

#### 如何选择

- 若父类中被重写的方法没有throws方式处理异常，则子类重写的方法也不能使用throws，意味着若子类重写的方法有异常必须使用try-catch-finally
- 执行的方法a中，先后调用了另外几个方法，这几个方法是递进关系执行的。建议这几个方法使用throws的方式处理，而执行的方法a可以考虑使用try-catch-finally

#### 自定义异常类

1. 继承现有的异常结构：RuntimeException、Exception
2. 提供全局常量：serialVersionUID
3. 提供重载的构造器

#### throw VS throws

- throw表示抛出一个异常类对象，生成异常对象的过程。声明在方法体内。
- throws属于异常处理的一种方式，声明在方法的声明处。